# CherryQuant 用户使用指南

> **版本**: 1.0.0
> **更新日期**: 2025年11月
> **适用人群**: 无编程经验的期货交易者

---

## ⚠️ 重要风险提示（必读）

**在使用本系统前，请务必仔细阅读以下风险提示：**

### 🚨 核心风险警告

1. **期货交易高风险**
   - 期货交易采用保证金制度，具有杠杆效应，可能导致您损失全部投资本金甚至超出本金
   - 过往业绩不代表未来表现，任何交易策略都可能在市场环境变化时失效
   - 您应充分了解期货交易的风险，审慎决定是否参与期货交易

2. **AI系统局限性**
   - 本系统基于人工智能算法做出交易决策，但AI不是万能的，不能保证盈利
   - AI决策依赖历史数据和市场模式，极端行情或黑天鹅事件可能导致重大损失
   - 系统可能出现技术故障、网络中断、数据错误等问题，造成交易损失

3. **实验性质声明**
   - 本系统为技术研究项目，处于持续开发和测试阶段
   - 不构成任何投资建议、操作建议或决策依据
   - 实盘交易前必须经过充分的模拟测试和风险评估

4. **资金安全提示**
   - 请勿投入您无法承受损失的资金
   - 建议使用模拟账户（SimNow）进行充分测试，至少运行3-6个月
   - 实盘交易建议从小资金开始，逐步增加仓位

5. **合规性声明**
   - 您需自行确保使用本系统符合所在地区的法律法规
   - 期货交易需在正规期货公司开户，遵守监管规定
   - 本系统不提供代客理财、资产管理等服务

### ✍️ 免责声明

- 使用本系统的一切后果和责任由用户自行承担
- 开发者和提供者不对任何直接或间接损失承担责任
- 使用本系统即表示您已理解并接受上述所有风险

---

## 📖 什么是 CherryQuant？

CherryQuant（樱桃量化）是一个**基于人工智能的期货自动交易系统**，专为中国期货市场设计。

### 🎯 核心功能

**1. 智能品种选择**
- 系统可以从预设的品种池（如黑色系、有色金属等）中，自动选择当前最有交易机会的品种
- 类似于"AI投资顾问"，帮您从众多期货品种中筛选出值得关注的标的

**2. 自动交易决策**
- 使用先进的GPT-4人工智能模型分析市场行情
- 自动生成买入、卖出信号，无需人工盯盘
- 支持多个交易策略同时运行

**3. 全方位风险管理**
- 策略级风险控制：每个策略独立管理风险
- 组合级风险控制：多个策略之间协调，避免过度集中
- 实时监控和告警：异常情况及时通知

**4. 灵活的运行模式**
- **模拟模式**：使用模拟账户测试，不涉及真实资金，适合新手学习
- **实盘模式**：连接真实期货账户进行交易（需谨慎使用）

### ✨ 系统特色

| 特色 | 说明 | 优势 |
|------|------|------|
| 🤖 AI驱动 | 使用OpenAI GPT-4模型 | 智能分析市场，自适应能力强 |
| 📊 多品种支持 | 支持所有境内期货品种 | 上期所、大商所、郑商所、中金所 |
| 🔄 双模式切换 | 模拟/实盘灵活切换 | 先测试后实战，降低风险 |
| 📈 实时监控 | Web界面实时查看 | 随时了解系统运行状态 |
| 🛡️ 多重风险控制 | 止损、仓位管理、分散投资 | 最大程度保护本金 |
| 📝 完整记录 | 每笔交易和AI决策都有日志 | 可追溯、可分析、可优化 |

---

## 💰 使用成本说明

### 必需费用

1. **OpenAI API 费用**（AI服务）
   - 使用GPT-4模型进行决策分析
   - 费用：约 $0.03-0.10 USD/次决策（根据市场数据量）
   - 预估：每天交易10次，月费用约 $10-30 USD
   - 支付方式：需要国际信用卡，OpenAI账户充值

2. **Tushare Pro 数据服务**（市场数据）
   - 基础功能：120积分（免费注册可获得）
   - **主力合约查询：需要2000+积分**（重要功能）
   - **分钟级数据：需要2000+积分**（可选）
   - 获取方式：
     - 付费购买：约 ¥300-600 元获得2000积分
     - 推荐新用户注册可获得积分（详见Tushare官网）
   - 官网：https://tushare.pro/

3. **期货交易费用**（实盘交易时）
   - 期货公司手续费：根据不同期货公司和品种，通常为几元到几十元/手
   - 交易所费用：按交易所规定收取
   - 建议选择手续费较低的期货公司

### 可选费用

1. **服务器费用**（如需24小时运行）
   - 本地电脑运行：免费，但需保持开机
   - 云服务器：约 ¥50-200 元/月（阿里云、腾讯云等）
   - 配置要求：2核4G内存即可

### 免费资源

- Docker（数据库服务）：开源免费
- Python和系统代码：开源免费
- SimNow模拟账户：免费（推荐先使用）

**预估总成本**：
- 初始投入：¥300-600（Tushare积分）+ $30（OpenAI测试费用）
- 每月运行成本：$10-50（OpenAI） + ¥50-200（服务器，可选）

---

## 🚀 快速开始（非技术人员版）

### 准备工作清单

在开始使用前，您需要准备以下内容：

- [ ] 一台电脑（Windows/Mac/Linux均可）
- [ ] 稳定的网络连接
- [ ] OpenAI账户和API密钥（需要国际支付方式）
- [ ] Tushare Pro账户和Token（建议2000+积分）
- [ ] SimNow模拟账户（免费注册，用于测试）
- [ ] 预留2-3小时进行初次安装和配置

### 第一步：准备账户和密钥

#### 1.1 注册 OpenAI 账户

1. 访问 https://platform.openai.com/
2. 注册账户（需要国际手机号验证）
3. 进入 API Keys 页面，创建新的API密钥
4. **重要**：复制并保存好密钥（只显示一次）
5. 充值账户（建议先充值$20-50进行测试）

#### 1.2 注册 Tushare Pro

1. 访问 https://tushare.pro/register
2. 注册免费账户
3. 登录后进入"个人中心" → "接口TOKEN"
4. 复制并保存您的Token
5. **建议**：充值获取2000+积分（约300-600元）

#### 1.3 注册 SimNow 模拟账户

1. 访问 http://www.simnow.com.cn/
2. 点击"注册"，填写信息（无需实名）
3. 获得账户名和密码
4. 记录以下信息：
   - 用户名
   - 密码
   - 经纪商代码：9999
   - 行情服务器：tcp://180.168.146.187:10131
   - 交易服务器：tcp://180.168.146.187:10130

### 第二步：安装系统（需要技术支持）

**⚠️ 重要提示**：以下步骤涉及命令行操作，建议寻求技术人员协助完成首次安装。

安装过程包括：
1. 安装Python 3.12+和uv包管理器
2. 下载CherryQuant代码
3. 安装依赖包
4. 启动数据库服务（使用Docker）
5. 配置环境变量

**建议**：联系系统提供方或技术人员，提供远程协助完成安装。安装成功后，日常使用将变得简单。

### 第三步：配置系统

#### 3.1 编辑配置文件 `.env`

安装完成后，会有一个名为 `.env` 的配置文件，您需要填写以下信息：

```env
# ===== AI模型配置 =====
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx        # 填写您的OpenAI API密钥
OPENAI_MODEL=gpt-4                        # 使用GPT-4模型（推荐）

# ===== 运行模式 =====
DATA_MODE=dev                             # dev=模拟模式, live=实盘模式

# ===== 数据服务 =====
TUSHARE_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxx    # 填写您的Tushare Token

# ===== SimNow账户（用于测试） =====
CTP_USERID=你的SimNow用户名
CTP_PASSWORD=你的SimNow密码
CTP_BROKER_ID=9999
CTP_MD_ADDRESS=tcp://180.168.146.187:10131
CTP_TD_ADDRESS=tcp://180.168.146.187:10130
```

**重要提示**：
- 初次使用请保持 `DATA_MODE=dev`（模拟模式）
- 正式使用前请务必测试至少1-3个月

#### 3.2 配置交易策略 `config/strategies.json`

这个文件定义了系统将运行哪些交易策略。示例配置：

```json
{
  "commodity_pools": {
    "black": {
      "name": "黑色系",
      "commodities": ["rb", "hc", "i", "j", "jm"]
    }
  },
  "strategies": [
    {
      "strategy_id": "trend_01",
      "strategy_name": "黑色系趋势策略",
      "commodity_pool": "black",
      "max_symbols": 2,
      "initial_capital": 100000,
      "risk_per_trade": 0.02
    }
  ]
}
```

**参数说明**：
- `strategy_name`: 策略名称（可自定义）
- `commodity_pool`: 使用的品种池（black=黑色系）
- `max_symbols`: AI最多同时交易几个品种（建议2-3个）
- `initial_capital`: 初始资金（模拟盘可设置为100000）
- `risk_per_trade`: 单笔交易风险比例（0.02=2%，建议1-3%）

### 第四步：下载历史数据

首次运行前，需要下载历史行情数据供AI分析使用。

**命令**（请技术人员执行）：
```bash
uv run run_cherryquant_complete.py --download-data
```

**预计耗时**：
- 日线数据：5-10分钟
- 小时线数据：1-3小时（可选，需要2000+积分）

**注意**：仅下载日线数据即可满足大部分需求。

### 第五步：启动系统

#### 5.1 首次启动（模拟模式）

**命令**：
```bash
uv run run_cherryquant_complete.py
```

**启动后您将看到**：
- 系统初始化信息
- 数据库连接状态
- 加载的策略列表
- Web监控界面地址（http://localhost:8000）

#### 5.2 查看监控界面

打开浏览器，访问：
- **主监控界面**：http://localhost:8000
- **Grafana图表**：http://localhost:3000（用户名/密码：admin/admin）

在这里可以看到：
- 当前持仓情况
- 盈亏统计
- 历史交易记录
- AI决策日志
- 风险指标

### 第六步：日常监控

#### 监控要点

1. **每天检查**：
   - 登录监控界面，查看持仓和盈亏
   - 检查是否有风险告警
   - 查看AI决策日志，了解交易理由

2. **每周总结**：
   - 统计本周盈亏情况
   - 分析成功和失败的交易
   - 评估策略是否需要调整

3. **异常处理**：
   - 如发现连续亏损，及时暂停系统
   - 如遇到技术问题，查看日志文件
   - 重大市场波动时，考虑手动干预

#### 停止系统

在运行窗口按 `Ctrl+C`，系统会安全关闭并保存数据。

---

## ❓ 常见问题解答

### Q1: 我完全不懂编程，能使用吗？

**A**: 可以，但需要技术人员协助完成初次安装和配置。安装完成后，日常使用主要是通过Web界面监控，不需要编程知识。建议：
- 找一位懂Python的朋友或付费请技术人员完成安装
- 安装后学习使用Web监控界面
- 准备一份"紧急联系清单"，遇到问题时可以求助

### Q2: 系统能保证盈利吗？

**A**: **不能**。任何交易系统都无法保证盈利。CherryQuant使用AI技术提高决策质量，但期货市场受多种因素影响，存在不可预测性。您必须做好亏损的心理和资金准备。

### Q3: 需要一直开着电脑吗？

**A**: 是的。如果您希望系统24小时运行，有两种方案：
- **本地运行**：保持电脑开机（注意电费和硬件损耗）
- **云服务器**：租用云服务器运行（推荐，月费约50-200元）

建议使用云服务器，更稳定可靠。

### Q4: 模拟账户和实盘有什么区别？

**A**:
- **模拟账户（SimNow）**：
  - 使用虚拟资金，不涉及真钱
  - 行情数据与实盘一致
  - 可以测试策略，无风险
  - 建议至少运行3-6个月

- **实盘账户**：
  - 使用真实资金交易
  - 产生真实盈亏
  - 需要在期货公司开户
  - 仅在充分测试后使用

### Q5: 系统出故障了怎么办？

**A**: 遇到问题时的处理步骤：
1. **立即停止系统**（按Ctrl+C）
2. **检查当前持仓**，如有必要手动平仓
3. **查看日志文件**（在 `logs/` 目录）
4. **联系技术支持**，提供错误信息
5. 重大问题应暂停使用，直到问题解决

### Q6: 可以手动干预交易吗？

**A**: 可以。虽然系统自动运行，但在以下情况建议手动干预：
- 重大突发事件（政策变化、地缘政治等）
- 系统出现异常信号
- 连续大幅亏损
- 想要调整仓位或止损

手动操作可通过期货公司的交易软件进行。

### Q7: 如何优化策略配置？

**A**: 策略优化建议：
1. **初期**：使用默认配置，观察运行3个月
2. **调整**：根据实际表现，逐步调整参数
   - 单笔风险比例（risk_per_trade）：建议1-3%
   - 品种数量（max_symbols）：建议2-3个
   - 初始资金分配：根据实际情况
3. **原则**：每次只调整一个参数，观察效果
4. **记录**：保留调整日志，便于分析

### Q8: Tushare积分不够2000怎么办？

**A**: 如果积分不足2000：
- 部分功能受限（主力合约自动查询、分钟级数据）
- 系统会自动降级使用其他免费数据源（AKShare）
- 建议尽快升级积分，获得完整功能
- 升级方式：充值购买或推荐新用户注册

### Q9: 系统支持哪些期货品种？

**A**: 支持所有境内期货品种：
- **上期所（SHFE）**：螺纹钢(rb)、热卷(hc)、铜(cu)、铝(al)、锌(zn)、铅(pb)、镍(ni)、锡(sn)、黄金(au)、白银(ag)等
- **大商所（DCE）**：铁矿石(i)、焦炭(j)、焦煤(jm)、豆粕(m)、豆油(y)、玉米(c)等
- **郑商所（CZCE）**：白糖(SR)、棉花(CF)、PTA(TA)、甲醇(MA)等
- **中金所（CFFEX）**：沪深300(IF)、中证500(IC)、上证50(IH)、国债期货(T/TF/TS)

### Q10: 实盘交易需要多少资金？

**A**: 建议资金规模：
- **最低**：5-10万元（可交易少数品种，仓位受限）
- **推荐**：20-50万元（可较好分散风险，策略发挥空间大）
- **原则**：
  - 该资金应为"可承受全部损失"的闲置资金
  - 不要使用借贷资金或生活必需资金
  - 建议从小资金开始，逐步增加

---

## 📞 技术支持

### 获取帮助

如遇到问题，请按以下顺序寻求帮助：

1. **查看本文档**：大部分常见问题已在FAQ中解答
2. **查看日志文件**：`logs/cherryquant_complete.log`
3. **联系技术支持**：
   - Email: team@cherryquant.ai
   - 提供问题描述、错误日志、系统环境信息

### 紧急情况处理

**如遇以下紧急情况，请立即手动处理**：

1. **系统崩溃，有持仓未平仓**
   - 立即登录期货公司交易软件
   - 手动平仓或调整止损
   - 然后再排查系统问题

2. **网络中断**
   - 检查网络连接
   - 通过期货公司软件查看持仓
   - 恢复网络后重启系统

3. **重大市场事件**
   - 考虑暂停系统
   - 手动管理现有持仓
   - 事件平息后再启动系统

---

## 📋 使用检查清单

### 每日检查

- [ ] 系统运行状态正常
- [ ] 查看监控界面，确认持仓和盈亏
- [ ] 检查是否有风险告警
- [ ] 查看AI决策日志
- [ ] 确认网络和数据连接正常

### 每周检查

- [ ] 统计本周交易情况
- [ ] 分析盈亏原因
- [ ] 检查策略参数是否需要调整
- [ ] 查看系统日志，排查异常
- [ ] 备份重要数据和配置

### 每月检查

- [ ] 全面评估策略表现
- [ ] 统计月度收益率、最大回撤等指标
- [ ] 考虑是否需要优化配置
- [ ] 检查API费用消耗
- [ ] 更新系统到最新版本（如有）

---

## 📖 附录：专业术语解释

为帮助您更好理解系统，以下是一些常用术语：

| 术语 | 解释 |
|------|------|
| **品种池** | 预先设定的一组期货品种，如"黑色系"包括螺纹钢、铁矿石等 |
| **主力合约** | 当前交易最活跃、持仓量最大的期货合约 |
| **AI决策** | 系统使用人工智能模型（GPT-4）分析市场并生成交易信号 |
| **回测** | 使用历史数据测试策略表现，但不代表未来收益 |
| **仓位** | 当前持有的期货合约数量 |
| **止损** | 预设的最大亏损点，达到后自动平仓以控制损失 |
| **最大回撤** | 从最高点到最低点的最大跌幅，衡量风险的指标 |
| **Tick数据** | 最细粒度的行情数据，每笔成交都会产生一个Tick |
| **K线** | 蜡烛图，显示一段时间内的开盘价、收盘价、最高价、最低价 |
| **CTP** | 综合交易平台，期货交易的标准接口 |
| **SimNow** | 免费的期货模拟交易平台，用于测试 |

---

## 📄 法律声明

### 风险声明

1. 期货交易具有高风险，可能导致本金全部损失
2. 本系统为技术研究项目，不提供投资建议
3. 使用者应自行承担所有交易风险和责任
4. 开发者和提供者不对任何损失负责

### 合规要求

1. 使用者应确保符合所在地法律法规
2. 期货交易应在正规期货公司进行
3. 不得用于非法目的或违规操作
4. 系统不提供资产管理、代客理财等金融服务

### 知识产权

1. CherryQuant为开源项目，遵循MIT许可证
2. 使用者有权使用、修改、分发代码
3. 但需保留原始版权声明
4. 不提供任何明示或暗示的担保

---

## ✅ 开始使用前的最后确认

在正式开始使用CherryQuant前，请确认您已经：

- [ ] **完整阅读了风险提示**，理解期货交易的高风险性
- [ ] **准备好了必要的账户**（OpenAI、Tushare、SimNow）
- [ ] **预留了足够的测试时间**（建议至少3-6个月模拟测试）
- [ ] **准备了可承受损失的资金**（不使用借贷或生活资金）
- [ ] **有技术支持渠道**（朋友、付费技术人员或官方支持）
- [ ] **建立了风险管理意识**（设置止损、定期检查、理性决策）
- [ ] **理解系统局限性**（AI不保证盈利，可能出现故障）

**如果以上所有项目都已确认，您可以开始使用CherryQuant。祝您交易顺利！**

---

<div align="center">

**CherryQuant Team**
Email: team@cherryquant.ai
Documentation: https://docs.cherryquant.ai

*本文档最后更新：2025年11月*

</div>
