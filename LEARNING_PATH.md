# 🗺️ CherryQuant 学习路径

## 📌 概述

本文档提供了 CherryQuant 教学项目的完整学习路径，涵盖 **10 周课程**，帮助学生从基础到高级逐步掌握 AI 编程、Python 最佳实践、软件架构和量化交易知识。

### 🎯 课程总目标

完成本课程后，你将能够：
- ✅ 构建生产级别的 AI 驱动应用
- ✅ 编写符合工业标准的 Python 代码
- ✅ 设计和实现复杂的软件架构
- ✅ 理解量化交易系统的核心概念

### ⏱️ 时间规划

- **总学时**: 约 100-120 小时
- **周课时**: 10-12 小时/周
- **课程时长**: 10 周
- **考核方式**: 实验 (60%) + 作业 (20%) + 毕业项目 (20%)

---

## 📅 分周学习计划

### 第 1 周：基础准备与环境搭建

#### 学习目标
- ✅ 掌握 Python 3.12+ 新特性
- ✅ 理解异步编程基础
- ✅ 成功搭建开发环境
- ✅ 运行第一个示例程序

#### 学习内容

**Module 0: 前置知识与环境搭建** (6 小时)
- 📚 **课程材料**: `docs/course/00_Prerequisites.md`
- 📖 **阅读材料**:
  - Python 3.12 新特性回顾
  - async/await 基础概念
  - uv 包管理器介绍
  - Git 工作流复习

**实践活动** (4 小时)
- 🧪 **Lab 01**: 环境搭建与首次运行
  - 安装 Python 3.12
  - 配置 IDE (VS Code / PyCharm)
  - 克隆项目并安装依赖
  - 运行 `examples/01_basics/hello_cherryquant.py`
  - 理解项目结构

#### 作业
- [ ] 完成环境搭建检查清单
- [ ] 提交 `hello_cherryquant.py` 运行截图
- [ ] 编写简单的 async/await 示例

#### 自我评估
- [ ] 我能解释什么是协程（coroutine）
- [ ] 我能使用 uv 安装和管理依赖
- [ ] 我能运行项目中的任何示例
- [ ] 我理解项目的目录结构

---

### 第 2 周：系统架构基础

#### 学习目标
- ✅ 理解六边形架构原理
- ✅ 识别 CherryQuant 的架构层次
- ✅ 追踪数据在系统中的流动

#### 学习内容

**Module 1: 系统架构设计** (8 小时)
- 📚 **课程材料**: `docs/course/01_System_Architecture.md`
- 📖 **阅读材料**:
  - 六边形架构 (Hexagonal Architecture) 原理
  - 端口与适配器模式
  - 为什么不用 MVC / MVVM？
  - CherryQuant 架构图详解
- 📝 **架构决策**: `docs/adr/0001-use-mongodb.md`, `0002-dependency-injection.md`

**实践活动** (4 小时)
- 🧪 **Lab 02**: 追踪数据流
  - 使用调试器追踪数据请求
  - 绘制从 API 到数据库的完整路径
  - 识别每一层的职责
  - 修改一个适配器，观察影响范围

#### 作业
- [ ] 绘制 CherryQuant 的分层架构图
- [ ] 回答：为什么选择六边形架构？
- [ ] 对比六边形架构与分层架构（Layered Architecture）

#### 自我评估
- [ ] 我能解释六边形架构的核心思想
- [ ] 我能识别端口（Port）和适配器（Adapter）
- [ ] 我理解数据如何在系统中流动
- [ ] 我知道修改适配器为什么不影响核心业务逻辑

---

### 第 3 周：数据管道设计

#### 学习目标
- ✅ 理解适配器模式的实际应用
- ✅ 掌握异步数据获取技术
- ✅ 实现缓存和降级策略

#### 学习内容

**Module 2: 数据管道设计** (8 小时)
- 📚 **课程材料**: `docs/course/02_Data_Pipeline.md`
- 📖 **阅读材料**:
  - 适配器模式详解
  - MarketDataManager 设计
  - 多数据源切换机制
  - Redis 缓存策略
  - 降级方案：Tushare → AKShare → 本地数据

**代码阅读** (2 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/adapters/data_adapter/market_data_manager.py`
  - `src/cherryquant/adapters/data_adapter/history_data_manager.py`
  - `src/cherryquant/adapters/data_storage/database_manager.py`

**实践活动** (4 小时)
- 🧪 **Lab 03**: 实现你的数据源
  - 创建自定义数据源适配器
  - 实现 `get_market_data()` 接口
  - 添加缓存层
  - 编写单元测试

#### 作业
- [ ] 实现一个 CSV 文件数据源适配器
- [ ] 为你的适配器编写测试
- [ ] 解释：为什么使用适配器模式？

#### 自我评估
- [ ] 我能实现一个新的数据源适配器
- [ ] 我理解 Redis 缓存的作用
- [ ] 我知道如何处理数据源失败
- [ ] 我能解释异步数据获取的优势

---

### 第 4 周：数据管道深化

#### 学习目标
- ✅ 掌握高级异步编程模式
- ✅ 实现并发数据获取
- ✅ 处理错误和超时

#### 学习内容

**异步编程深入** (6 小时)
- 📖 **阅读材料**:
  - asyncio 并发模式
  - `gather()` vs `wait()` vs `as_completed()`
  - 超时控制与取消
  - 异常传播

**代码阅读** (3 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/adapters/data_adapter/multi_symbol_manager.py`
  - 异步数据批量获取
  - 错误隔离策略

**实践活动** (5 小时)
- 🧪 **扩展 Lab 03**:
  - 实现批量数据获取
  - 添加超时控制
  - 处理部分失败场景
  - 性能优化

#### 作业
- [ ] 优化你的适配器支持并发获取
- [ ] 对比同步 vs 异步性能差异
- [ ] 处理网络超时和重试逻辑

#### 自我评估
- [ ] 我能使用 asyncio.gather() 并发执行任务
- [ ] 我知道如何设置超时
- [ ] 我能处理部分任务失败的情况
- [ ] 我理解异步编程的性能优势

---

### 第 5 周：AI 决策引擎基础

#### 学习目标
- ✅ 掌握 OpenAI API 使用
- ✅ 理解提示工程基础
- ✅ 实现 AI 决策接口

#### 学习内容

**Module 3: AI 决策引擎** (8 小时)
- 📚 **课程材料**: `docs/course/03_AI_Decision_Engine.md`
- 📖 **阅读材料**:
  - OpenAI API 认证与调用
  - 提示工程 (Prompt Engineering) 原理
  - System Prompt vs User Prompt
  - JSON 模式与结构化输出
  - Token 优化策略
- 📝 **架构决策**: `docs/adr/0003-prompt-engineering-ai.md`

**代码阅读** (2 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/ai/llm_client/openai_client.py`
  - `src/cherryquant/ai/decision_engine/futures_engine.py`

**实践活动** (6 小时)
- 🧪 **Lab 04**: 编写你的第一个 AI 交易代理
  - 配置 OpenAI API（使用测试密钥）
  - 设计交易决策提示词
  - 实现 JSON 响应解析
  - 处理 API 错误和重试

#### 作业
- [ ] 设计一个趋势跟踪策略的提示词
- [ ] 实现 AI 决策的成本统计
- [ ] 对比不同 GPT 模型的效果

#### 自我评估
- [ ] 我能成功调用 OpenAI API
- [ ] 我理解提示工程的基本原则
- [ ] 我能解析和验证 JSON 响应
- [ ] 我知道如何优化 Token 使用

---

### 第 6 周：AI 决策引擎进阶

#### 学习目标
- ✅ 提高 AI 决策的可靠性
- ✅ 实现多轮对话与上下文管理
- ✅ 成本优化与监控

#### 学习内容

**AI 可靠性设计** (6 小时)
- 📖 **阅读材料**:
  - 重试与指数退避
  - 降级方案（AI 失败时的 fallback）
  - 响应验证与格式修正
  - 成本监控与预算控制

**代码阅读** (2 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/ai/decision_engine/ai_selection_engine.py`
  - 多品种扫描与选择

**实践活动** (6 小时)
- 🧪 **扩展 Lab 04**:
  - 添加重试机制
  - 实现响应验证
  - 添加成本统计
  - 设计 fallback 策略（规则引擎）

#### 作业
- [ ] 实现 AI 决策的成本和延迟监控
- [ ] 设计一个混合策略（AI + 规则）
- [ ] 评估不同温度（temperature）参数的影响

#### 自我评估
- [ ] 我能处理 AI API 失败场景
- [ ] 我知道如何控制 AI 调用成本
- [ ] 我能设计有效的 fallback 策略
- [ ] 我理解如何平衡成本与准确性

---

### 第 7 周：交易执行与风险管理

#### 学习目标
- ✅ 理解订单管理系统
- ✅ 实现风险控制逻辑
- ✅ 集成 VNPy 框架

#### 学习内容

**Module 4: 交易执行与风险管理** (8 小时)
- 📚 **课程材料**: `docs/course/04_Trading_Execution.md`
- 📖 **阅读材料**:
  - VNPy 框架介绍
  - CTP 接口基础
  - 订单生命周期
  - 风险管理原则
  - 仓位管理策略

**代码阅读** (2 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/adapters/vnpy_recorder/realtime_recorder.py`
  - `risk/portfolio_risk_manager.py` (如果存在)

**实践活动** (6 小时)
- 🧪 **Lab 05**: 自定义风险管理器
  - 实现仓位限制检查
  - 添加止损逻辑
  - 计算 VaR (Value at Risk)
  - 编写风控测试

#### 作业
- [ ] 设计一个完整的风险管理系统
- [ ] 实现多层风控（策略级 + 组合级）
- [ ] 计算最大回撤和夏普比率

#### 自我评估
- [ ] 我理解订单的生命周期
- [ ] 我能实现基本的风险控制
- [ ] 我知道如何计算风险指标
- [ ] 我理解 VNPy 的事件驱动机制

---

### 第 8 周：依赖注入与测试

#### 学习目标
- ✅ 掌握依赖注入模式
- ✅ 提高代码可测试性
- ✅ 编写单元测试和集成测试

#### 学习内容

**Module 5: 依赖注入实战** (6 小时)
- 📚 **课程材料**: `docs/course/05_Dependency_Injection.md`
- 📖 **阅读材料**:
  - 为什么需要依赖注入？
  - 构造函数注入 vs 属性注入
  - 组合根（Composition Root）模式
  - 避免 Service Locator 反模式
- 📝 **架构决策**: `docs/adr/0002-dependency-injection.md`

**Module 6: 测试驱动开发** (6 小时)
- 📚 **课程材料**: `docs/course/06_Testing_Strategies.md`
- 📖 **阅读材料**:
  - 单元测试 vs 集成测试
  - Mock, Stub, Fake 的区别
  - pytest 最佳实践
  - 测试覆盖率分析

**代码阅读** (2 小时)
- 🔍 **关键文件**:
  - `src/cherryquant/bootstrap/app_context.py`
  - `tests/` 目录下的测试示例

**实践活动** (10 小时)
- 🧪 **Lab 06**: 重构为 DI 模式
  - 识别隐式依赖
  - 重构为构造函数注入
  - 实现 AppContext
  - 编写可测试的代码

- 🧪 **Lab 07**: 为 AI 引擎编写测试
  - Mock OpenAI API 响应
  - 测试错误处理路径
  - 参数化测试
  - 测试覆盖率达到 80%+

#### 作业
- [ ] 重构一个现有模块使用 DI
- [ ] 为你的代码编写完整测试套件
- [ ] 达到 80% 测试覆盖率

#### 自我评估
- [ ] 我能解释依赖注入的好处
- [ ] 我能识别代码中的隐式依赖
- [ ] 我能使用 Mock 进行单元测试
- [ ] 我理解测试金字塔模型

---

### 第 9 周：代码质量与最佳实践

#### 学习目标
- ✅ 掌握 Python 代码规范
- ✅ 使用静态分析工具
- ✅ 提高代码可维护性

#### 学习内容

**Module 7: Python 代码规范** (8 小时)
- 📚 **课程材料**: `docs/course/07_Python_Best_Practices.md`
- 📖 **阅读材料**:
  - PEP 8 风格指南
  - Type Hints 最佳实践
  - Ruff (Linter) 使用
  - Black (Formatter) 配置
  - Mypy (Type Checker) 集成
  - 代码审查清单

**Module 8: 结构化日志与监控** (4 小时)
- 📚 **课程材料**: `docs/LOGGING_GUIDE.md`
- 📖 **阅读材料**:
  - Structlog 使用
  - 日志最佳实践
  - JSON 日志格式
  - 日志级别策略

**实践活动** (6 小时)
- 🧪 **Lab 08**: 代码质量提升
  - 配置 Ruff, Black, Mypy
  - 修复所有 linting 错误
  - 添加完整的 Type Hints
  - 设置 Pre-commit Hooks

#### 作业
- [ ] 为整个项目配置代码质量工具
- [ ] 修复所有 Type Hints 警告
- [ ] 编写代码审查指南

#### 自我评估
- [ ] 我的代码符合 PEP 8 规范
- [ ] 我能有效使用 Type Hints
- [ ] 我知道如何配置 linting 工具
- [ ] 我理解结构化日志的价值

---

### 第 10 周：毕业项目

#### 学习目标
- ✅ 综合应用所学知识
- ✅ 设计完整的交易系统
- ✅ 优化性能和部署

#### 学习内容

**Module 9: 毕业项目** (20+ 小时)
- 📚 **课程材料**: `docs/course/09_Capstone_Project.md`

**项目要求**:
设计并实现一个完整的 AI 驱动交易策略，包括：

1. **策略设计** (4 小时)
   - 选择交易品种和策略类型
   - 设计 AI 提示词
   - 定义风险参数

2. **系统实现** (8 小时)
   - 实现数据获取模块
   - 集成 AI 决策引擎
   - 添加风险管理
   - 使用依赖注入

3. **测试与优化** (4 小时)
   - 编写完整测试套件
   - 性能优化
   - 代码质量检查

4. **文档与部署** (4 小时)
   - 编写 README 和用户指南
   - 创建 ADR 文档
   - Docker 部署配置

**可选高级功能**:
- 📊 **回测系统**: 使用历史数据验证策略
- 🔄 **多策略协同**: AgentManager 使用
- 📈 **性能监控**: Prometheus + Grafana
- 🌐 **Web 界面**: FastAPI + React

#### 评分标准 (100 分)

| 项目 | 分值 | 说明 |
|------|------|------|
| 策略设计 | 20 | 创新性、合理性 |
| 代码实现 | 30 | 架构、代码质量 |
| 测试覆盖 | 20 | 测试完整性、覆盖率 |
| 文档质量 | 15 | README、ADR、注释 |
| 演示答辩 | 15 | 讲解、Q&A |
| **加分项** | +10 | 创新功能、开源贡献 |

#### 项目提交
- [ ] 完整源代码（GitHub 仓库）
- [ ] README.md（含运行说明）
- [ ] 测试报告（覆盖率 > 70%）
- [ ] 架构文档或 ADR
- [ ] 演示视频（5-10 分钟）

---

## 📊 评估与反馈

### 形成性评估（持续评估）

**每周检查点** (40%)
- 实验完成度 (30%)
- 代码质量 (5%)
- 学习笔记 (5%)

**作业** (20%)
- 每周作业提交
- 代码审查评分

### 总结性评估（期末）

**毕业项目** (40%)
- 项目评分标准见上

### 反馈机制

- **周反馈**: 每周实验/作业提交后 3 天内反馈
- **期中检查**: 第 5 周进行学习进度回顾
- **期末答辩**: 第 10 周项目演示和答辩

---

## 🎓 学习建议

### 高效学习方法

1. **主动学习**
   - 📖 先阅读课程材料理解概念
   - 💻 再动手实践巩固知识
   - 🤔 思考为什么这样设计
   - ✍️ 写学习笔记总结

2. **循序渐进**
   - ⏭️ 不要跳过基础模块
   - 🔁 遇到困难反复练习
   - 📝 及时复习前面的内容
   - 🎯 每周设定明确目标

3. **代码阅读**
   - 🔍 阅读优秀开源项目
   - 📚 理解设计模式应用
   - 🛠️ 尝试重构代码
   - 💡 学习编程思维

4. **协作学习**
   - 👥 组队讨论问题
   - 🗣️ 教别人是最好的学习
   - 🐛 互相代码审查
   - 💬 积极参与讨论

### 时间管理

**每周 10-12 小时建议分配**:
- 📚 理论学习：3-4 小时
- 💻 实验练习：4-5 小时
- ✍️ 作业完成：2-3 小时
- 🔄 复习总结：1 小时

**每天学习**:
- 工作日：1-2 小时
- 周末：4-6 小时

### 资源利用

- 📖 **课程材料**: 深入阅读，不要走马观花
- 🧪 **实验**: 认真完成，不要复制粘贴
- 📝 **ADR**: 学习架构决策思维
- 💬 **Discussions**: 提问和帮助他人
- 📚 **参考书籍**: 扩展阅读推荐书目

---

## 🆘 遇到困难怎么办？

### 学习卡住时的检查清单

- [ ] 我仔细阅读了课程材料吗？
- [ ] 我查看了相关代码示例吗？
- [ ] 我运行并调试了示例代码吗？
- [ ] 我查阅了 ADR 和文档吗？
- [ ] 我在 GitHub Discussions 搜索过吗？
- [ ] 我请教过同学吗？

### 求助渠道（按优先级）

1. **自助**: 查看文档、hints.md、FAQ
2. **同学**: 在学习小组讨论
3. **在线**: GitHub Discussions 提问
4. **教师**: Office Hours 或邮件

### 常见问题

**Q: 我没有 Python 基础，能学这门课吗？**
A: 本课程要求中级 Python 水平。建议先学习 Python 基础，然后再开始。

**Q: 我需要购买 OpenAI API 吗？**
A: 基础学习使用模拟数据，无需 API。高级功能可选使用（自费）。

**Q: 实验太难完成不了怎么办？**
A: 查看 hints.md，与同学讨论，在 Discussions 提问，寻求教师帮助。

**Q: 我可以用其他 AI 模型替代 GPT 吗？**
A: 可以！这是很好的扩展练习，尝试集成 Claude、Gemini 等。

---

## 🎯 课程完成后的下一步

### 继续深造

- 📚 **高级主题**:
  - 分布式系统设计
  - 机器学习应用
  - 高频交易系统
  - 区块链集成

- 🎓 **相关课程**:
  - 机器学习与深度学习
  - 分布式系统
  - 金融工程
  - 数据科学

### 实践应用

- 💼 **实习/工作**:
  - 量化交易公司
  - Fintech 创业公司
  - AI 应用开发
  - Python 后端开发

- 🚀 **个人项目**:
  - 开源贡献
  - 创建自己的交易策略
  - 构建 SaaS 产品
  - 技术博客/教程

### 持续学习

- 📖 **阅读**: 保持阅读技术书籍和论文
- 💻 **编码**: 每天写代码，保持手感
- 🌐 **社区**: 参与开源项目和技术社区
- 🎤 **分享**: 写博客、做演讲，教会别人

---

## 📞 联系与支持

- 💬 **GitHub Discussions**: 提问和讨论
- 🐛 **Issue Tracker**: 报告问题
- 📧 **Email**: teaching@cherryquant.com
- 📚 **文档**: 持续更新中

---

<div align="center">

**准备好开始这段激动人心的学习之旅了吗？**

[返回 README](README.md) | [开始 Module 0](docs/course/00_Prerequisites.md)

---

💡 **学习提示**: 这是一个挑战性的课程，但坚持下来你会获得巨大成长！

Made with ❤️ for Students | CherryQuant Teaching Project

</div>
